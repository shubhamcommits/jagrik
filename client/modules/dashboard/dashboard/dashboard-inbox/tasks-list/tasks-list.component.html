<canvas id="my-canvas"></canvas>
<ng-container *ngIf="isdash == false && isdash1 == true && taskStatus?.taskStatus !== 'Waiting for approval'">
<div class="container">
  <div class="row">
      <div class="col-md-4 col-xl-3">
          <div class="card bg-c-blue order-card">
              <div class="card-block">
                  <h3 class="m-b-20 card-value">Week</h3>
                  <h2 class="text-right">
                    <mat-icon class="icon-top">today</mat-icon><span>{{taskList[taskList.length-1]?.week}}</span>
                  </h2>
                  <!-- <p class="m-b-0">Completed Orders<span class="f-right">351</span></p> -->
              </div>
          </div>
      </div>

      <div class="col-md-4 col-xl-3">
          <div class="card bg-c-green order-card">
              <div class="card-block">
                  <h3 class="m-b-20 card-value text-capitalize">{{data?.card?.theme}}</h3>
                  <h2 class="text-right"><mat-icon class="icon-top">call_to_action</mat-icon><span>{{data?.card?.dice_number}}</span></h2>
                  <!-- <p class="m-b-0" class="text-capitalize">{{data?.card?.theme}}</p> -->
              </div>
          </div>
      </div>

      <div class="col-md-4 col-xl-3">
          <div class="card bg-c-yellow order-card">
              <div class="card-block">
                  <h3 class="m-b-20 card-value">Team Task Status</h3>
                  <h2 class="text-right"><mat-icon class="icon-top">autorenew</mat-icon><span>{{taskStatus?.teamTask == 'complete' ? 'Submitted' : 'Pending'}}</span></h2>
                  <!-- <p class="m-b-0">Completed Orders<span class="f-right">351</span></p> -->
              </div>
          </div>
      </div>

      <div class="col-md-4 col-xl-3" >
          <div class="card bg-c-pink order-card" style="height: 100%;">
              <div class="card-block">
                  <h3 class="m-b-20 card-value">User Task Status</h3>
                  <!-- <h2 class="text-right"><mat-icon class="icon-top">User</mat-icon><span>486</span></h2>
                  <p class="m-b-0">Completed Orders<span class="f-right">351</span></p> -->
                  <div class="row" *ngFor="let item of taskStatus?.teamMembers">
                    <div class="col-md-9">
                      <p class="text-capitalize"><b>{{item.user_name}}</b></p>
                    </div>
                    <div class="col-md-3">
                        <div style="border-radius:50%; background-color:rgb(255, 60, 0);width: 23px;height: 23px;" *ngIf="item.user_individual_task_status === false">
                        </div>
                        <div style="border-radius:50%; background-color:rgb(123, 255, 0);width: 23px;height: 23px;" *ngIf="item.user_individual_task_status === true">
                        </div>
                    </div>
                  </div>
              </div>
          </div>
      </div>
</div>
</div>



<!-- Task List -->

<!-- ////////TRYHARD -->
          <!-- <div class="perspective">

            <label class="tab" for="tab-top">TOP</label>
            <label class="tab" for="tab-front">FRONT</label>
            <label class="tab" for="tab-bottom">BOTTOM</label>
            <input type="radio" name="tabs" id="tab-top">
            <input type="radio" name="tabs" id="tab-front">
            <input type="radio" name="tabs" id="tab-bottom"> 

            <div class="cube">
              <div class="tab-content">
                <h1>TOP CONTENT</h1>
                <p>THIS IS AWESOME</p>
              </div>
              <div class="tab-content">
                <h1>FRONT CONTENT</h1>
                <p>THIS IS COOL</p>
              </div>
              <div class="tab-content">
                <h1>BOTTOM CONTENT</h1>
                <p>THIS IS SWEET</p>
              </div>
            </div>
          </div> -->

<!-- END -->
</ng-container>

<!-- New Theme -->
<div class="container">
<ng-container *ngIf="isdash == false && taskStatus?.taskStatus !== 'Waiting for approval'">

  <!-- Expansion Panel -->
  <mat-accordion class="example-headers-align" multi>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header style="background-color: #3d87d4;">
        <mat-panel-title style="color: white;font-weight: bold;font-size: 24px;">
         Community Task
        </mat-panel-title>
        <mat-panel-description>
         <span> Status:</span> <span [ngClass]="taskStatus?.teamTask == 'complete' ? 'submitted-green' : 'pending-red' " >{{taskStatus?.teamTask == 'complete' ? 'Submitted' : 'Pending'}}
           <!-- <mat-icon >done_all</mat-icon> -->
          </span>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-container *ngIf="!chosenLevel">
        <div class="row">
          <div class="col-md-4 center-it" (click)="this.filterCommData('gold')" (click)="level = 'gold'" (click)="chosenLevel = true">
            <div class="circle-level gold-level">
               GOLD
            </div>
        </div>
        <div class="col-md-4 center-it" (click)="this.filterCommData('silver')" (click)="level = 'silver'" (click)="chosenLevel = true">
          <div class="circle-level silver-level">
             SILVER
          </div>
        </div>
        <div class="col-md-4 center-it" (click)="this.filterCommData('bronze')" (click)="level = 'bronze'" (click)="chosenLevel = true">
          <div class="circle-level bronze-level">
             BRONZE
          </div>
        </div>
        </div>
      </ng-container>
  
      <ng-container *ngIf="chosenLevel">
        <ng-container *ngIf="this.level == 'gold'">
          <!-- <div class="row">
              <div class="col-md-4 center-it">
                <div class="circle-level gold-level">
                  GOLD
                </div>
              </div>
              <div class="col-md-8">
                <ng-container *ngFor="let task of this.data.tasks" >
                  <div *ngIf="task.category == 'community' && task?.type== 'gold'" class="task-list"  >
                    <div class="row">
                      <div class="col-12 text-capitalize heading">Description</div>
                      <div class="col-12">
                        <p>{{ task?.description }}</p>
                      </div>
                    </div><br>
                    <div class="row">
                      <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}</div>
                      <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button
                          mat-raised-button class="task-btn"
                          (click)="openDialog(task)">UPLOAD</button></div>
                    </div>
                  </div>
                </ng-container>
              </div>
          </div> -->
    <div class="blog-card">
        <ng-container *ngFor="let task of this.comData; let i= index">
            <ng-container *ngIf="i == 0" >
            <input type="radio" name="select" id="tap-{{i+1}}" checked>
            </ng-container>
            <ng-container *ngIf="i != 0" >
              <input type="radio" name="select" id="tap-{{i+1}}" >
            </ng-container>
        </ng-container>
            <input type="checkbox" id="imgTap">
            <div class="sliders" >
                  <ng-container *ngFor="let task of this.comData; let y= index">
                      <label for="tap-{{y+1}}" class="tap tap-{{y+1}}"></label>
                  </ng-container>
            </div>
        <div class="inner-part " *ngFor="let task of this.comData; let z= index">
              <span class="circle-level gold-level"> GOLD</span>
              <div class="content content-{{z+1}}">
                    <div class="row">
                        <div class="col-12 text-capitalize heading">Description</div>
                        <div class="col-11">
                          <p>{{ task?.description }}</p>
                        </div>
                        <div class="col-md-1">
                          <label for="tap-{{z+2}}" class="tap tap-{{z+2}}"><mat-icon aria-hidden="false" aria-label="Example home icon">home</mat-icon></label>
                        </div>
                    </div><br>
                    <div class="row">
                        <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}
                        </div>
                        <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button
                            mat-raised-button class="task-btn"
                            (click)="openDialog(task)">UPLOAD</button>
                        </div>
                    </div>
              </div>
        </div>
    </div>
        </ng-container>
        <ng-container *ngIf="this.level == 'silver'">
          <!-- <div class="row">
              <div class="col-md-4 center-it">
                <div class="circle-level silver-level">
                  SILVER
                </div>
              </div>
              <div class="col-md-8">
                <ng-container *ngFor="let task of this.data.tasks" >
                  <div *ngIf="task.category == 'community' && task?.type== 'silver'" class="task-list" >
                    <div class="row">
                     <div class="col-12 text-capitalize heading">Description</div>
                     <div class="col-12">
                       <p>{{ task?.description }}</p>
                     </div>
                    </div><br>
                    <div class="row">
                      <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}</div>
                      <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button
                          mat-raised-button
                          class="task-btn"
                          (click)="openDialog(task)">UPLOAD</button></div>
                    </div>
                  </div>
                </ng-container>
              </div>
          </div> -->
          <div class="blog-card">
            <ng-container *ngFor="let task of this.comData; let a= index">
                <ng-container *ngIf="a == 0" >
                <input type="radio" name="select" id="tap-{{a+1}}" checked>
                </ng-container>
                <ng-container *ngIf="a != 0" >
                  <input type="radio" name="select" id="tap-{{a+1}}" >
                </ng-container>
            </ng-container>
                <input type="checkbox" id="imgTap">
                <div class="sliders" >
                    <ng-container *ngFor="let task of this.comData; let b= index">
                    <label for="tap-{{b+1}}" class="tap tap-{{b+1}}"></label>
                  </ng-container>
                </div>
          <div class="inner-part " *ngFor="let task of this.comData; let z= index">
                <span class="circle-level silver-level">
                  SILVER
                </span>
                <div class="content content-{{z+1}}">
                  <div class="row">
                      <div class="col-12 text-capitalize heading">Description</div>
                      <div class="col-12">
                        <p>{{ task?.description }}</p>
                      </div>
                  </div><br>
                  <div class="row">
                      <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}
                      </div>
                      <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button
                          mat-raised-button class="task-btn"
                          (click)="openDialog(task)">UPLOAD</button>
                      </div>
                  </div>
                </div>
          </div>
        </div>
        </ng-container>
        <ng-container *ngIf="this.level == 'bronze'">
          <div class="blog-card">
            <ng-container *ngFor="let task of this.comData; let a= index">
                <ng-container *ngIf="a == 0" >
                <input type="radio" name="select" id="tap-{{a+1}}" checked>
                </ng-container>
                <ng-container *ngIf="a != 0" >
                  <input type="radio" name="select" id="tap-{{a+1}}" >
                </ng-container>
            </ng-container>
                <input type="checkbox" id="imgTap">
                <div class="sliders" >
                    <ng-container *ngFor="let task of this.comData; let b= index">
                    <label for="tap-{{b+1}}" class="tap tap-{{b+1}}"></label>
                  </ng-container>
                </div>
          <div class="inner-part " *ngFor="let task of this.comData; let z= index">
                <span class="circle-level bronze-level">
                  BRONZE
                </span>
                <div class="content content-{{z+1}}">
                  <div class="row">
                      <div class="col-12 text-capitalize heading">Description</div>
                      <div class="col-12">
                        <p>{{ task?.description }}</p>
                      </div>
                  </div><br>
                  <div class="row">
                      <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}
                      </div>
                      <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button
                          mat-raised-button class="task-btn"
                          (click)="openDialog(task)">UPLOAD</button>
                      </div>
                  </div>
                </div>
          </div>
        </div>
        </ng-container>
        
      </ng-container> 
  
  
    </mat-expansion-panel>
  </mat-accordion>
  
  <mat-accordion class="example-headers-align" multi>
    <mat-expansion-panel>
      <mat-expansion-panel-header style="background-color: #9080e8;">
        <mat-panel-title style="color: white;font-weight: bold;font-size: 24px;background-color: #9080e8;">
         Self Task
        </mat-panel-title>
        <mat-panel-description>
         <span> Status:</span><span [ngClass]="taskStatus?.taskStatus == 'Waiting for approval' ? 'submitted-green' : 'pending-red' " >{{taskStatus?.taskStatus == 'Waiting for approval' ? 'Submitted' : 'Pending'}}
           <!-- <mat-icon >done_all</mat-icon> -->
          </span>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-container *ngIf="!chosenLevelself">
        <div class="row">
          <div class="col-md-4 center-it" (click)="levelself = 'gold'" (click)="chosenLevelself = true">
            <div class="circle-level gold-level">
               GOLD
            </div>
        </div>
        <div class="col-md-4 center-it" (click)="levelself = 'silver'" (click)="chosenLevelself = true">
          <div class="circle-level silver-level">
             SILVER
          </div>
        </div>
        <div class="col-md-4 center-it" (click)="levelself = 'bronze'" (click)="chosenLevelself = true">
          <div class="circle-level bronze-level">
             BRONZE
          </div>
        </div>
        </div>
      </ng-container>
  
      <ng-container *ngIf="chosenLevelself">
        <ng-container *ngIf="this.levelself == 'gold'">
          <div class="row">
              <div class="col-md-4 center-it">
                <div class="circle-level gold-level">
                  GOLD
                </div>
              </div>
              <div class="col-md-8">
                <ng-container *ngFor="let task of this.data.tasks" >
                  <div *ngIf="task.category == 'self' && task?.type== 'gold'" class="task-list"  >
                    <div class="row">
                      <div class="col-12 text-capitalize heading">Description</div>
                      <div class="col-12">
                        <p>{{ task?.description }}</p>
                      </div>
                    </div><br>
                    <div class="row">
                      <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}</div>
                      <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button
                          mat-raised-button class="task-btn"
                          (click)="openDialog(task)">UPLOAD</button></div>
                    </div>
                  </div>
                </ng-container>
              </div>
          </div>
        </ng-container>
        <ng-container *ngIf="this.levelself == 'silver'">
          <div class="row">
              <div class="col-md-4 center-it">
                <div class="circle-level silver-level">
                  SILVER
                </div>
              </div>
              <div class="col-md-8">
                <ng-container *ngFor="let task of this.data.tasks" >
                  <div *ngIf="task.category == 'self' && task?.type== 'silver'" class="task-list" >
                    <div class="row">
                     <div class="col-12 text-capitalize heading">Description</div>
                     <div class="col-12">
                       <p>{{ task?.description }}</p>
                     </div>
                    </div><br>
                    <div class="row">
                      <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}</div>
                      <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button
                          mat-raised-button
                          class="task-btn"
                          (click)="openDialog(task)">UPLOAD</button></div>
                    </div>
                  </div>
                </ng-container>
              </div>
          </div>
        </ng-container>
        <ng-container *ngIf="this.levelself == 'bronze'">
          <div class="row">
              <div class="col-md-4 center-it">
                <div class="circle-level bronze-level">
                  BRONZE
                </div>
              </div>
              <div class="col-md-8">
                <ng-container *ngFor="let task of this.data.tasks" >
              <div *ngIf="task.category == 'self' && task?.type== 'bronze'" class="task-list" >
                <div class="row">
                  <div class="col-12 text-capitalize heading">Description</div>
                  <div class="col-12">
                    <p>{{ task?.description }}</p>
                  </div>
    
                </div><br>
                <div class="row">
                  <div class="col-6 text-capitalize new-label">Points: {{ task?.points }}</div>
                  <div *ngIf="taskStatus?.teamTask  !== 'complete'" class="col-6 text-capitalize new-col"><button mat-raised-button
                      class="task-btn" (click)="openDialog(task)">UPLOAD</button></div>
                </div>
              </div>
            </ng-container>
              </div>
          </div>
        </ng-container>
        
      </ng-container> 
  
  
    </mat-expansion-panel>
  </mat-accordion>
  

</ng-container>


</div>






<ng-container *ngIf="isdash == false && isdash1 == true && taskStatus?.taskStatus === 'Waiting for approval'">
  <h3 class="d-flex justify-content-center">Congratulations!! You have sucessfully completed your task.</h3>
  <span class="d-flex justify-content-center">Please sit back and relax, while your facilitator verifies your uploaded task</span>
  <div class="row" style="justify-content: center; display: flex; align-items: center;">
    <img class="d-flex justify-content-center" src="assets/undraw_relaxing_at_home_9tyc.svg" style="max-width: 40vw;">
  </div>

</ng-container>

<ng-container *ngIf="isdash == true && isdash1 == true">
  <div class="d-flex justify-content-center" >
    <!-- {{myTime| date:'HH:mm'}} {{item.time}} -->
    <!-- //&& item.time > (myTime | date:'HH:mm') -->
    <!-- <i class="material-icons pending-clock">watch_later</i> <b>Pending</b>
    <i class="material-icons complete-check">check_circle</i> <b>Complete</b>
     <b>{{taskStatus?.teamTask == 'complete' ? 'Submitted' : 'Pending'}}</b>  -->
  <div class="card " style="width: 500px;border-radius: 0%;margin-bottom:20px;">
    <div class="row no-gutters " *ngIf="data?.card?.theme && data?.card?.theme !== ''">
        <div class="col-sm-5" style="justify-content: center; align-items: center; color: white;"
        ngClass="{{data?.card?.theme === 'fundamental duties'  ? 'bg-yellow': 'bg-pink'}}">
          <div class="row">
            <h1 style="font-size: 50px;margin: 0 0 0px;" class="text-uppercase"><b>{{data?.card?.dice_number}}</b></h1>
          </div>
          <div class="row">
            <h4 class="text-uppercase" style="margin: 0px;">Card No.</h4>
          </div>
        </div>
        <div class="col-sm-7">
            <div class="card-body">
                <h2 class="card-title text-uppercase"><b>{{data?.card?.theme}}</b></h2>
                <h3 class="card-title">{{data?.card?.description}}</h3>
                <!-- <a *ngIf="userData.role != 'student'" href="{{item.join_moderate}}" target="_blank"
                  class="btn btn-primary btn-sm">Start</a>
                  <a *ngIf="userData.role == 'student'"
                    href="{{item.join_attende}}" target="_blank" class="btn btn-primary btn-sm">Join</a> -->
            </div>
        </div>
    </div>
  </div>
  </div>

  <div class="row" *ngIf="data?.card?.theme && data?.card?.theme !== ''">

      <div class="col-md-12">
        <div class="row" style="display: flex; justify-content: center;">
          <h2>Task Status: {{taskStatus?.taskStatus}}</h2>
        </div>
        <div class="row">
          <div class="col-md-6">
            <h3>Community Task: </h3>
          </div>
          <div class="col-md-6">
            <h3><i class="material-icons" ngClass="{{taskStatus?.teamTask == 'complete'  ? 'complete-check': 'pending-clock'}}">{{taskStatus?.teamTask == 'complete' ?'check_circle': 'watch_later' }}</i> <b>{{taskStatus?.teamTask == 'complete' ? 'Submitted' : 'Pending'}}</b> </h3>
          </div>
            <br>
        </div>
        <ng-container *ngFor="let item of taskStatus?.teamMembers">
          <div class="row">
            <div class="col-md-6">
              <h3 class="text-capitalize">{{item.user_name}}'s Task:</h3>
            </div>
            <div class="col-md-6">
            <h3><i class="material-icons" ngClass="{{item.user_individual_task_status === true  ? 'complete-check': 'pending-clock'}}">{{item.user_individual_task_status === true ?'check_circle': 'watch_later' }}</i> <b>{{item.user_individual_task_status === true ? 'Submitted' : 'Pending'}}</b></h3>
            </div>
            <br>
          </div>
        </ng-container>
      </div>
  </div>
  <div class="row" style="display: flex; justify-content: flex-end;" *ngIf="!(!data?.card?.theme || (data?.card?.theme && data?.card?.theme === ''))">
  <button ngClass="{{data?.card?.theme === 'fundamental duties'  ? 'bg-yellow': 'bg-pink'}}" class="btn-default" [routerLink]="['/dashboard', 'tasks']" style="color: white;border: 0px;font-size: 19px;padding: 8px;">View Task<mat-icon aria-hidden="false" aria-label="Example home icon">arrow_right_alt</mat-icon></button>
  </div>
</ng-container>

<ng-container *ngIf="isdash == true && !data?.card?.theme || (data?.card?.theme && data?.card?.theme === '')">
<div class="row">
  <div class="col-md-12">
    <img style="max-height: 40vh;max-width: 100%;" src="assets/undraw_No_data_re_kwbl.svg">
  </div>
   <div class="col-md-12">
    <span class="d-flex justify-content-center">No Active Tasks</span>
   </div>
   <div class="col-md-12" style="display: flex; justify-content: flex-end;">
    <button class="btn-jagrik btn-default" [routerLink]="['/dashboard', 'tasks']" style="color: white;border: 0px;font-size: 19px;padding: 8px;">Task Board<mat-icon aria-hidden="false" aria-label="Example home icon">arrow_right_alt</mat-icon></button>
 </div>
 </div>
 </ng-container>